# @configure_input@
# but you may want to hand-edit it anyway to cross-compile, etc.
#
# This file is included by the gen-makefile Perl script which creates the
# makefiles used to compile with d2c.

$target_name = '@d2c_target@';
$host_name = '@d2c_host@';

$srcroot = "@srcdir@";
$buildroot = "@builddir@";
$prefix = "@prefix@";
$destdir = $exec_prefix = "@exec_prefix@";
$bindir = "@bindir@";
$libdir = "@libdir@/dylan";
$sysconfdir = "@sysconfdir@";
$includedir = "@includedir@";
$gen_makefile = "$buildroot/gen-makefile";
$enable_mindy = "@enable_mindy@" eq "yes";
$enable_d2c = "@enable_d2c@" eq "yes";
$enable_mindy_bootstrap = "@enable_mindy_bootstrap@" eq "yes";
$INSTALL = "@INSTALL@";

# INSTALL_DATA and INSTALL_PROGRAM don't do what I would expect.  In
# particular, INSTALL_PROGRAM doesn't force executability.
$install_data = "@INSTALL@";
$install_program = "@INSTALL@ -m oug+rx";

$D2C = "@D2C@ -T$target_name";
if ($host_name ne $target_name) {
  $D2C = "$D2C -no-binaries";
};

$MC = '@MC@';
$MINDY = '@MINDY@';
$DYLANPATH = @DYLANPATH@;
$CC = 'gcc';
$CFLAGS = '-O4 -finline-functions';
$CPPFLAGS = '-I'.$srcroot.'/d2c/runtime';

if ($enable_mindy_bootstrap) {
  $PARSERGEN = "$MINDY -f $buildroot/tools/parsergen/parsergen-lib.dbc";
  $MELANGE = "$MINDY -f $buildroot/tools/melange/melange.dbc";
} else {
  $PARSERGEN = "$buildroot/tools/parsergen/parsergen";
  $MELANGE = "$buildroot/tools/melange/melange";
};
