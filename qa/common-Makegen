# common makegen stuff for the "common libraries" under d2c.
# each makegen should &makegen_include("../common-Makegen"), and also
# add any of the other common libraries they use to D2CFLAGS.

$CPPFLAGS = '-I$(SRCROOT)/d2c/runtime';

$testflags = '-profiling';

sub emit_run_tests_rule {
    local (@tests) = @_;
    local ($test);
    print "run_tests : ";
    foreach $test (@tests) {
	print "$test$dot_exe " if ($enable_d2c);
    }
    print "\n";

    foreach $test (@tests) {
	local ($test) = &convert_path_separator("./$test");
	print "\t$test $testflags\n" if ($enable_d2c);
    }
    push(@compile_dependencies, "run_tests");
}
